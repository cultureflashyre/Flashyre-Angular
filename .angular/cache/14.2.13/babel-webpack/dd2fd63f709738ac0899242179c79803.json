{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"ngx-spinner\";\nexport let TrialAssessmentService = /*#__PURE__*/(() => {\n  class TrialAssessmentService {\n    constructor(http, spinner) {\n      this.http = http;\n      this.spinner = spinner;\n      this.apiUrl = `${environment.apiUrl}/trial_assessments`; // Uses environment-based URL\n    } // Fetch trial assessment data including sections, questions, and timer duration\n\n\n    getAssessmentDetails(assessmentId) {\n      this.spinner.show();\n      const token = localStorage.getItem('token');\n      console.log('Using token:', token ? 'Token exists' : 'No token found');\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`\n      });\n      return new Observable(observer => {\n        const url = `${this.apiUrl}/?assessment_id=${assessmentId}`;\n        console.log('Making request to:', url);\n        this.http.get(`${environment.apiUrl}/assessments/?assessment_id=${assessmentId}`, {\n          headers\n        }).subscribe({\n          next: response => {\n            console.log('API Response:', response);\n            this.spinner.hide();\n            observer.next(response);\n            observer.complete();\n          },\n          error: error => {\n            console.error('API Error details:', error);\n            this.spinner.hide();\n            observer.error(error);\n          }\n        });\n      });\n    } // Submit trial assessment answers\n\n\n    submitAssessment(data) {\n      this.spinner.show(); // Show spinner before submitting\n\n      const token = localStorage.getItem('token'); // Retrieve JWT token\n\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`\n      });\n      return new Observable(observer => {\n        this.http.post(`${this.apiUrl}/assessments/submit-assessment/`, data, {\n          headers\n        }).subscribe({\n          next: response => {\n            this.spinner.hide(); // Hide spinner on successful submission\n\n            observer.next(response);\n            observer.complete();\n          },\n          error: error => {\n            this.spinner.hide(); // Hide spinner on error\n\n            observer.error(error);\n          }\n        });\n      });\n    }\n\n  }\n\n  TrialAssessmentService.ɵfac = function TrialAssessmentService_Factory(t) {\n    return new (t || TrialAssessmentService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.NgxSpinnerService));\n  };\n\n  TrialAssessmentService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: TrialAssessmentService,\n    factory: TrialAssessmentService.ɵfac,\n    providedIn: 'root'\n  });\n  return TrialAssessmentService;\n})();","map":null,"metadata":{},"sourceType":"module"}