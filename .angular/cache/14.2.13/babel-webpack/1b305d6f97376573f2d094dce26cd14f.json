{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport var QuestionStatus = /*#__PURE__*/(() => {\n  (function (QuestionStatus) {\n    QuestionStatus[\"UNATTENDED\"] = \"unattended\";\n    QuestionStatus[\"VISITED\"] = \"visited\";\n    QuestionStatus[\"ANSWERED\"] = \"answered\";\n  })(QuestionStatus || (QuestionStatus = {}));\n\n  return QuestionStatus;\n})();\nexport let AssessmentStateService = /*#__PURE__*/(() => {\n  class AssessmentStateService {\n    constructor() {\n      this.questionStatesMap = {};\n      this.currentQuestionIdSubject = new BehaviorSubject(null);\n    } // Get current question as an observable\n\n\n    get currentQuestionId$() {\n      return this.currentQuestionIdSubject.asObservable();\n    } // Set current question\n\n\n    setCurrentQuestionId(questionId) {\n      this.currentQuestionIdSubject.next(questionId); // Mark as visited if not already\n\n      if (questionId !== null && this.questionStatesMap[questionId]) {\n        if (this.questionStatesMap[questionId].status === QuestionStatus.UNATTENDED) {\n          this.questionStatesMap[questionId].status = QuestionStatus.VISITED;\n        }\n      }\n    } // Initialize question states for an assessment\n\n\n    initializeQuestionStates(questions) {\n      questions.forEach(question => {\n        if (!this.questionStatesMap[question.question_id]) {\n          this.questionStatesMap[question.question_id] = {\n            questionId: question.question_id,\n            sectionId: question.section_id,\n            status: QuestionStatus.UNATTENDED\n          };\n        }\n      });\n    } // Get status of a question\n\n\n    getQuestionStatus(questionId) {\n      var _a;\n\n      return ((_a = this.questionStatesMap[questionId]) === null || _a === void 0 ? void 0 : _a.status) || QuestionStatus.UNATTENDED;\n    } // Update status of a question\n\n\n    updateQuestionStatus(questionId, status) {\n      if (this.questionStatesMap[questionId]) {\n        this.questionStatesMap[questionId].status = status;\n      }\n    } // Save an answer\n\n\n    saveAnswer(questionId, sectionId, answer) {\n      if (!this.questionStatesMap[questionId]) {\n        this.questionStatesMap[questionId] = {\n          questionId,\n          sectionId,\n          status: QuestionStatus.ANSWERED,\n          answer\n        };\n      } else {\n        this.questionStatesMap[questionId].answer = answer;\n        this.questionStatesMap[questionId].status = QuestionStatus.ANSWERED;\n      }\n    } // Clear an answer\n\n\n    clearAnswer(questionId) {\n      if (this.questionStatesMap[questionId]) {\n        delete this.questionStatesMap[questionId].answer;\n        this.questionStatesMap[questionId].status = QuestionStatus.VISITED;\n      }\n    } // Get all saved answers for submission\n\n\n    getAllAnswers() {\n      const answers = {};\n      Object.values(this.questionStatesMap).forEach(state => {\n        if (state.status === QuestionStatus.ANSWERED && state.answer) {\n          answers[state.questionId] = {\n            answer: state.answer,\n            section_id: state.sectionId\n          };\n        }\n      });\n      return answers;\n    }\n\n  }\n\n  AssessmentStateService.ɵfac = function AssessmentStateService_Factory(t) {\n    return new (t || AssessmentStateService)();\n  };\n\n  AssessmentStateService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AssessmentStateService,\n    factory: AssessmentStateService.ɵfac,\n    providedIn: 'root'\n  });\n  return AssessmentStateService;\n})();","map":null,"metadata":{},"sourceType":"module"}