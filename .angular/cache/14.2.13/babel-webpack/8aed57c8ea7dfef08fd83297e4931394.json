{"ast":null,"code":"import { Observable, BehaviorSubject } from 'rxjs';\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"ngx-spinner\";\nexport let AssessmentService = /*#__PURE__*/(() => {\n  class AssessmentService {\n    constructor(http, spinner) {\n      this.http = http;\n      this.spinner = spinner;\n      this.apiUrl = environment.apiUrl + 'assessments'; // Replace with your server URL\n\n      this.timerSource = new BehaviorSubject(0);\n      this.timer$ = this.timerSource.asObservable();\n    } // Fetch assessment data including sections, questions, and timer duration\n    //getAssessmentData(assessmentId: number): Observable<AssessmentResponse> {\n    //return this.http.get<AssessmentResponse>(`${this.apiUrl}/?assessment_id=${assessmentId}`, { withCredentials: true });\n    //}\n\n\n    getAssessmentData(assessmentId) {\n      this.spinner.show(); // Show spinner before making the request\n\n      return new Observable(observer => {\n        this.http.get(`${this.apiUrl}/?assessment_id=${assessmentId}`, {\n          withCredentials: true\n        }).subscribe({\n          next: response => {\n            this.spinner.hide(); // Hide spinner on successful response\n\n            observer.next(response);\n            observer.complete();\n          },\n          error: error => {\n            this.spinner.hide(); // Hide spinner on error\n\n            observer.error(error);\n          }\n        });\n      });\n    } // Update timer value\n\n\n    updateTimer(time) {\n      this.timerSource.next(time);\n    } // Submit assessment answers\n    //submitAssessment(answers: any): Observable<any> {\n    //return this.http.post(`${this.apiUrl}/submit-assessment/`, answers, { withCredentials: true });\n    //}\n\n\n    submitAssessment(answers) {\n      this.spinner.show(); // Show spinner before submitting\n\n      return new Observable(observer => {\n        this.http.post(`${this.apiUrl}/submit-assessment/`, answers, {\n          withCredentials: true\n        }).subscribe({\n          next: response => {\n            this.spinner.hide(); // Hide spinner on successful submission\n\n            observer.next(response);\n            observer.complete();\n          },\n          error: error => {\n            this.spinner.hide(); // Hide spinner on error\n\n            observer.error(error);\n          }\n        });\n      });\n    }\n\n  }\n\n  AssessmentService.ɵfac = function AssessmentService_Factory(t) {\n    return new (t || AssessmentService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.NgxSpinnerService));\n  };\n\n  AssessmentService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AssessmentService,\n    factory: AssessmentService.ɵfac,\n    providedIn: 'root'\n  });\n  return AssessmentService;\n})();","map":null,"metadata":{},"sourceType":"module"}