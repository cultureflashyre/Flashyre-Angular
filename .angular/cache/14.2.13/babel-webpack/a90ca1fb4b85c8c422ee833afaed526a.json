{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, switchMap } from 'rxjs/operators';\nlet CreateJobPost1stPageComponent = class CreateJobPost1stPageComponent {\n  constructor(title, meta, fb, snackBar, jobDescriptionService, corporateAuthService, router, route) {\n    this.title = title;\n    this.meta = meta;\n    this.fb = fb;\n    this.snackBar = snackBar;\n    this.jobDescriptionService = jobDescriptionService;\n    this.corporateAuthService = corporateAuthService;\n    this.router = router;\n    this.route = route;\n    this.searchTerms = new Subject();\n    this.suggestions = [];\n    this.isLoading = false;\n    this.showSuggestions = false;\n    this.selectedFile = null;\n    this.DEBOUNCE_DELAY = 300;\n    this.jobForm = this.fb.group({\n      role: ['', [Validators.required, Validators.maxLength(100)]],\n      location: ['', [Validators.required, Validators.maxLength(200)]],\n      job_type: ['', [Validators.required]],\n      workplace_type: ['', [Validators.required]],\n      total_experience_min: [0, [Validators.required, Validators.min(0), Validators.max(30)]],\n      total_experience_max: [30, [Validators.required, Validators.min(0), Validators.max(30)]],\n      relevant_experience_min: [0, [Validators.required, Validators.min(0), Validators.max(30)]],\n      relevant_experience_max: [30, [Validators.required, Validators.min(0), Validators.max(30)]],\n      budget_type: ['', [Validators.required]],\n      min_budget: [0, [Validators.required, Validators.min(0)]],\n      max_budget: [0, [Validators.required, Validators.min(0)]],\n      notice_period: ['', [Validators.required, Validators.maxLength(50)]],\n      skills: [[], [Validators.required]],\n      job_description: ['', [Validators.maxLength(5000)]],\n      job_description_url: ['', [Validators.maxLength(200)]],\n      unique_id: ['']\n    }, {\n      validators: this.experienceRangeValidator\n    });\n  }\n\n  ngOnInit() {\n    this.title.setTitle('Create Job Post - Flashyre');\n    this.meta.addTags([{\n      property: 'og:title',\n      content: 'Create Job Post - Flashyre'\n    }, {\n      property: 'og:image',\n      content: 'https://aheioqhobo.cloudimg.io/v7/_playground-bucket-v2.teleporthq.io_/8203932d-6f2d-4493-a7b2-7000ee521aa2/9aea8e9c-27ce-4011-a345-94a92ae2dbf8?org_if_sml=1&force_format=original'\n    }]);\n\n    if (!this.corporateAuthService.isLoggedIn()) {\n      this.snackBar.open('Please log in to create a job post.', 'Close', {\n        duration: 5000\n      });\n      this.router.navigate(['/login-corporate']);\n    }\n\n    this.setupSearch(); // Fetch job post data if unique_id is provided\n\n    const uniqueId = this.route.snapshot.paramMap.get('unique_id');\n\n    if (uniqueId) {\n      const token = this.corporateAuthService.getJWTToken();\n\n      if (token) {\n        this.jobDescriptionService.getJobPost(uniqueId, token).subscribe({\n          next: jobPost => {\n            this.populateForm(jobPost);\n          },\n          error: error => {\n            this.snackBar.open('Failed to load job post data.', 'Close', {\n              duration: 5000\n            });\n          }\n        });\n      } else {\n        this.snackBar.open('Authentication required. Please log in.', 'Close', {\n          duration: 5000\n        });\n        this.router.navigate(['/login-corporate']);\n      }\n    }\n  }\n\n  adjustExperienceRange(min, max) {\n    if (min === 0 && max === 0) {\n      return [0, 30];\n    }\n\n    return [min, max];\n  }\n\n  ngAfterViewInit() {\n    this.initializeSkillsInput();\n    this.initializeRange('total');\n    this.initializeRange('relevant');\n    this.updateExperienceUI();\n  }\n\n  experienceRangeValidator(form) {\n    var _a, _b, _c, _d;\n\n    const totalMin = (_a = form.get('total_experience_min')) === null || _a === void 0 ? void 0 : _a.value;\n    const totalMax = (_b = form.get('total_experience_max')) === null || _b === void 0 ? void 0 : _b.value;\n    const relevantMin = (_c = form.get('relevant_experience_min')) === null || _c === void 0 ? void 0 : _c.value;\n    const relevantMax = (_d = form.get('relevant_experience_max')) === null || _d === void 0 ? void 0 : _d.value;\n\n    if (totalMin > totalMax) {\n      return {\n        invalidTotalExperience: true\n      };\n    }\n\n    if (relevantMin > relevantMax) {\n      return {\n        invalidRelevantExperience: true\n      };\n    }\n\n    return null;\n  }\n\n  onFileSelected(event) {\n    const input = event.target;\n\n    if (input.files && input.files.length > 0) {\n      this.selectedFile = input.files[0];\n      const allowedExtensions = ['.pdf', '.docx', '.txt', '.xml', '.csv'];\n      const ext = this.selectedFile.name.toLowerCase().substring(this.selectedFile.name.lastIndexOf('.'));\n      const maxSize = 10 * 1024 * 1024;\n\n      if (!allowedExtensions.includes(ext)) {\n        this.snackBar.open(`Invalid file format. Supported: ${allowedExtensions.join(', ')}`, 'Close', {\n          duration: 5000\n        });\n        this.selectedFile = null;\n        input.value = '';\n      } else if (this.selectedFile.size > maxSize) {\n        this.snackBar.open('File size exceeds 10MB limit.', 'Close', {\n          duration: 5000\n        });\n        this.selectedFile = null;\n        input.value = '';\n      }\n    } else {\n      this.selectedFile = null;\n    }\n  } //   testExperienceRange(totalMin: number, totalMax: number, relevantMin: number, relevantMax: number): void {\n  //   const mockJobData: JobDetails = {\n  //     role: 'Test Role',\n  //     location: 'Test Location',\n  //     job_type: 'Permanent',\n  //     workplace_type: 'Remote',\n  //     total_experience_min: totalMin,\n  //     total_experience_max: totalMax,\n  //     relevant_experience_min: relevantMin,\n  //     relevant_experience_max: relevantMax,\n  //     budget_type: 'Annually',\n  //     min_budget: 0,\n  //     max_budget: 0,\n  //     notice_period: '30 days',\n  //     skills: { primary: [], secondary: [] },\n  //     job_description: 'Test description',\n  //     unique_id: 'test-unique-id',\n  //     job_description_url: '',\n  //     status: 'draft'\n  //   };\n  //   this.populateForm(mockJobData);\n  // }\n\n\n  updateExperienceUI() {\n    this.setExperienceRange('total', this.jobForm.value.total_experience_min, this.jobForm.value.total_experience_max);\n    this.setExperienceRange('relevant', this.jobForm.value.relevant_experience_min, this.jobForm.value.relevant_experience_max);\n  }\n\n  uploadFile() {\n    if (!this.selectedFile) {\n      this.snackBar.open('Please select a file to upload.', 'Close', {\n        duration: 5000\n      });\n      return;\n    }\n\n    const token = this.corporateAuthService.getJWTToken();\n\n    if (!token) {\n      this.snackBar.open('Authentication required. Please log in.', 'Close', {\n        duration: 5000\n      });\n      this.router.navigate(['/login-corporate']);\n      return;\n    }\n\n    this.jobDescriptionService.uploadFile(this.selectedFile, token).subscribe({\n      next: response => {\n        this.jobForm.patchValue({\n          job_description_url: response.file_url,\n          unique_id: response.unique_id\n        });\n        this.populateForm(response);\n        this.snackBar.open('File uploaded and processed successfully.', 'Close', {\n          duration: 3000\n        });\n      },\n      error: error => {\n        console.error('File upload error:', error);\n        this.snackBar.open(`File upload or processing failed: ${error.message}`, 'Close', {\n          duration: 5000\n        });\n      }\n    });\n  }\n\n  populateForm(jobData) {\n    var _a, _b, _c;\n\n    let role;\n    let location;\n    let job_type;\n    let workplace_type;\n    let total_experience_min;\n    let total_experience_max;\n    let relevant_experience_min;\n    let relevant_experience_max;\n    let budget_type;\n    let min_budget;\n    let max_budget;\n    let notice_period;\n    let skills;\n    let job_description;\n\n    if ('job_details' in jobData) {\n      // Handle AIJobResponse\n      const aiJobData = jobData;\n      const jobDetails = aiJobData.job_details;\n      const [minExp, maxExp] = this.parseExperience(((_a = jobDetails.experience) === null || _a === void 0 ? void 0 : _a.value) || '0-0 years');\n      role = ((_b = jobDetails.job_titles[0]) === null || _b === void 0 ? void 0 : _b.value) || 'Unknown';\n      location = jobDetails.location || 'Unknown';\n      job_type = this.mapJobType(((_c = jobDetails.job_titles[0]) === null || _c === void 0 ? void 0 : _c.value) || '');\n      workplace_type = jobDetails.workplace_type || 'Remote';\n      total_experience_min = minExp;\n      total_experience_max = maxExp; // Adjust total experience if both min and max are 0\n\n      [total_experience_min, total_experience_max] = this.adjustExperienceRange(total_experience_min, total_experience_max);\n      relevant_experience_min = Math.max(0, minExp - 1);\n      relevant_experience_max = Math.min(maxExp, minExp + 2); // Adjust relevant experience if both min and max are 0\n\n      [relevant_experience_min, relevant_experience_max] = this.adjustExperienceRange(relevant_experience_min, relevant_experience_max);\n      budget_type = jobDetails.budget_type || 'Annually';\n      min_budget = jobDetails.min_budget || 0;\n      max_budget = jobDetails.max_budget || 0;\n      notice_period = jobDetails.notice_period || '30 days';\n      skills = [...(jobDetails.skills.primary || []).map(s => s.skill), ...(jobDetails.skills.secondary || []).map(s => s.skill)];\n      job_description = jobDetails.job_description || '';\n    } else {\n      // Handle JobDetails\n      const jobDetails = jobData;\n      role = jobDetails.role;\n      location = jobDetails.location;\n      job_type = jobDetails.job_type;\n      workplace_type = jobDetails.workplace_type;\n      total_experience_min = jobDetails.total_experience_min;\n      total_experience_max = jobDetails.total_experience_max; // Adjust total experience if both min and max are 0\n\n      [total_experience_min, total_experience_max] = this.adjustExperienceRange(total_experience_min, total_experience_max);\n      relevant_experience_min = jobDetails.relevant_experience_min;\n      relevant_experience_max = jobDetails.relevant_experience_max; // Adjust relevant experience if both min and max are 0\n\n      [relevant_experience_min, relevant_experience_max] = this.adjustExperienceRange(relevant_experience_min, relevant_experience_max);\n      budget_type = jobDetails.budget_type;\n      min_budget = jobDetails.min_budget;\n      max_budget = jobDetails.max_budget;\n      notice_period = jobDetails.notice_period;\n      skills = jobDetails.skills.primary.map(s => s.skill).concat(jobDetails.skills.secondary.map(s => s.skill));\n      job_description = jobDetails.job_description;\n    } // Populate form fields\n\n\n    this.jobForm.patchValue({\n      role,\n      location,\n      job_type,\n      workplace_type,\n      total_experience_min,\n      total_experience_max,\n      relevant_experience_min,\n      relevant_experience_max,\n      budget_type,\n      min_budget,\n      max_budget,\n      notice_period,\n      skills,\n      job_description,\n      unique_id: 'unique_id' in jobData ? jobData.unique_id : jobData.unique_id\n    }); // Update DOM elements\n\n    this.setInputValue('Role-Input-Field', role);\n    this.setInputValue('location', location);\n    this.setRadioButton('job_type', job_type);\n    this.setRadioButton('workplace_type', workplace_type);\n    this.setRadioButton('budget_type', budget_type);\n    this.setInputValue('min-budget-input-field', min_budget.toString());\n    this.setInputValue('max-budget-input', max_budget.toString());\n    this.setInputValue('notice-period-input-filed', notice_period);\n    this.populateSkills(skills);\n    this.setJobDescription(job_description);\n    this.setExperienceRange('total', total_experience_min, total_experience_max);\n    this.setExperienceRange('relevant', relevant_experience_min, relevant_experience_max);\n  }\n\n  setTextField(id, value) {\n    const element = document.getElementById(id);\n\n    if (element) {\n      element.textContent = value;\n    }\n  }\n\n  setInputValue(id, value) {\n    const element = document.getElementById(id);\n\n    if (element) {\n      element.value = value;\n    }\n  }\n\n  setRadioButton(groupName, value) {\n    const radio = document.querySelector(`input[name=\"${groupName}\"][value=\"${value}\"]`);\n\n    if (radio) {\n      radio.checked = true;\n    }\n  }\n\n  populateSkills(skills) {\n    const tagContainer = document.getElementById('tagContainer');\n    const tagInput = document.getElementById('tagInput');\n    if (!tagContainer || !tagInput) return;\n    tagContainer.innerHTML = ''; // Clear existing tags\n\n    skills.forEach(skill => {\n      const tag = document.createElement('div');\n      tag.className = 'tag';\n      const tagText = document.createElement('span');\n      tagText.textContent = skill;\n      tag.appendChild(tagText);\n      const removeBtn = document.createElement('button');\n      removeBtn.textContent = '×';\n      removeBtn.addEventListener('click', () => {\n        tag.remove();\n        const updatedSkills = this.jobForm.value.skills.filter(s => s !== skill);\n        this.jobForm.patchValue({\n          skills: updatedSkills\n        });\n      });\n      tag.appendChild(removeBtn);\n      tagContainer.insertBefore(tag, tagInput);\n    });\n    this.jobForm.patchValue({\n      skills\n    });\n  }\n\n  setJobDescription(description) {\n    const editor = document.getElementById('editor');\n\n    if (editor) {\n      editor.innerHTML = description;\n      this.checkEmpty('editor');\n    }\n  }\n\n  setExperienceRange(type, min, max) {\n    const prefix = type === 'total' ? 'total_' : 'relevant_';\n    const rangeIndicator = document.getElementById(`${prefix}rangeIndicator`);\n    const markerLeft = document.getElementById(`${prefix}markerLeft`);\n    const markerRight = document.getElementById(`${prefix}markerRight`);\n    const labelLeft = document.getElementById(`${prefix}labelLeft`);\n    const labelRight = document.getElementById(`${prefix}labelRight`);\n    const filledSegment = document.getElementById(`${prefix}filledSegment`);\n\n    if (rangeIndicator && markerLeft && markerRight && labelLeft && labelRight && filledSegment) {\n      const rect = rangeIndicator.getBoundingClientRect();\n      const width = rect.width;\n      const maxYears = 30; // 0-30 years range\n\n      const minPos = min / maxYears * (width - 10);\n      const maxPos = max / maxYears * (width - 10);\n      markerLeft.style.left = `${minPos}px`;\n      markerRight.style.left = `${maxPos}px`;\n      labelLeft.style.left = `${minPos + 5}px`;\n      labelLeft.textContent = `${min}yrs`;\n      labelRight.style.left = `${maxPos + 5}px`;\n      labelRight.textContent = `${max}yrs`;\n      filledSegment.style.left = `${minPos + 5}px`;\n      filledSegment.style.width = `${maxPos - minPos}px`;\n    }\n  }\n\n  checkEmpty(id) {\n    const element = document.getElementById(id);\n    if (!element) return;\n    const isEmpty = element.textContent.trim() === '';\n    element.setAttribute('data-empty', isEmpty ? 'true' : 'false');\n  }\n\n  mapJobType(title) {\n    const lowerTitle = title.toLowerCase();\n    if (lowerTitle.includes('intern')) return 'Internship';\n    if (lowerTitle.includes('contract')) return 'Contract';\n    if (lowerTitle.includes('part-time')) return 'Part-time';\n    return 'Permanent';\n  }\n\n  initializeRange(type) {\n    const prefix = type === 'total' ? 'total_' : 'relevant_';\n    const rangeIndicator = document.getElementById(`${prefix}rangeIndicator`);\n    const markerLeft = document.getElementById(`${prefix}markerLeft`);\n    const markerRight = document.getElementById(`${prefix}markerRight`);\n    const labelLeft = document.getElementById(`${prefix}labelLeft`);\n    const labelRight = document.getElementById(`${prefix}labelRight`);\n    const filledSegment = document.getElementById(`${prefix}filledSegment`);\n    let isDragging = false;\n    let currentMarker = null;\n\n    const updateFilledSegment = () => {\n      const leftPos = parseFloat(markerLeft.style.left);\n      const rightPos = parseFloat(markerRight.style.left);\n      filledSegment.style.left = `${leftPos + 5}px`;\n      filledSegment.style.width = `${rightPos - leftPos}px`;\n    };\n\n    const updateLabelPosition = (marker, label) => {\n      const markerPos = parseFloat(marker.style.left);\n      label.style.left = `${markerPos + 5}px`;\n    };\n\n    const onMouseMove = e => {\n      if (!isDragging || !currentMarker || !rangeIndicator) return;\n      const rect = rangeIndicator.getBoundingClientRect();\n      let newLeft = e.clientX - rect.left - 5;\n      const minLeft = 0;\n      const maxLeft = rect.width - 10;\n\n      if (currentMarker === markerLeft) {\n        newLeft = Math.max(minLeft, Math.min(newLeft, parseFloat(markerRight.style.left) - 10));\n      } else if (currentMarker === markerRight) {\n        newLeft = Math.min(maxLeft, Math.max(newLeft, parseFloat(markerLeft.style.left) + 10));\n      }\n\n      currentMarker.style.left = `${newLeft}px`;\n      updateFilledSegment();\n      updateLabelPosition(currentMarker, currentMarker === markerLeft ? labelLeft : labelRight);\n      const width = rect.width - 10;\n      const maxYears = 30;\n      const minYear = Math.round(parseFloat(markerLeft.style.left) / width * maxYears);\n      const maxYear = Math.round(parseFloat(markerRight.style.left) / width * maxYears);\n\n      if (type === 'total') {\n        this.jobForm.patchValue({\n          total_experience_min: minYear,\n          total_experience_max: maxYear\n        });\n      } else {\n        this.jobForm.patchValue({\n          relevant_experience_min: minYear,\n          relevant_experience_max: maxYear\n        });\n      }\n\n      labelLeft.textContent = `${minYear}yrs`;\n      labelRight.textContent = `${maxYear}yrs`;\n    };\n\n    const onMouseUp = () => {\n      isDragging = false;\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n    };\n\n    const onMouseDown = (e, marker) => {\n      isDragging = true;\n      currentMarker = marker;\n      document.addEventListener('mousemove', onMouseMove);\n      document.addEventListener('mouseup', onMouseUp);\n    };\n\n    markerLeft.addEventListener('mousedown', e => onMouseDown(e, markerLeft));\n    markerRight.addEventListener('mousedown', e => onMouseDown(e, markerRight));\n    updateFilledSegment();\n  }\n\n  parseExperience(exp) {\n    const match = exp.match(/(\\d+)-(\\d+)/);\n    return match ? [parseInt(match[1]), parseInt(match[2])] : [0, 0];\n  }\n\n  setupSearch() {\n    this.searchTerms.pipe(debounceTime(this.DEBOUNCE_DELAY), distinctUntilChanged(), switchMap(query => {\n      this.isLoading = true;\n      return this.fetchLocationSuggestions(query);\n    })).subscribe({\n      next: suggestions => {\n        this.suggestions = suggestions;\n        this.showSuggestions = suggestions.length > 0;\n        this.isLoading = false;\n      },\n      error: error => {\n        this.snackBar.open('Failed to fetch location suggestions.', 'Close', {\n          duration: 5000\n        });\n        this.suggestions = [];\n        this.showSuggestions = false;\n        this.isLoading = false;\n      }\n    });\n  }\n\n  onInput(event) {\n    const query = event.target.value.trim();\n\n    if (query.length === 0) {\n      this.showSuggestions = false;\n      this.suggestions = [];\n      return;\n    }\n\n    this.searchTerms.next(query);\n  }\n\n  fetchLocationSuggestions(query) {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield new Promise(resolve => setTimeout(resolve, 500));\n      return this.getMockSuggestions(query);\n    });\n  }\n\n  getMockSuggestions(query) {\n    query = query.toLowerCase();\n    const cities = ['Multiple', 'New York, NY, USA', 'Los Angeles, CA, USA', 'Chicago, IL, USA', 'Houston, TX, USA', 'Phoenix, AZ, USA', 'Philadelphia, PA, USA', 'San Antonio, TX, USA', 'San Diego, CA, USA', 'Dallas, TX, USA', 'San Jose, CA, USA', 'London, UK', 'Paris, France', 'Tokyo, Japan', 'Sydney, Australia', 'Toronto, Canada'];\n    return cities.filter(city => city.toLowerCase().includes(query));\n  }\n\n  selectSuggestion(location) {\n    this.jobForm.patchValue({\n      location\n    });\n    this.showSuggestions = false;\n    this.suggestions = [];\n  }\n\n  handleOutsideClick(event) {\n    const target = event.target;\n\n    if (this.suggestionsContainer && !this.suggestionsContainer.nativeElement.contains(target) && target !== this.locationInput.nativeElement) {\n      this.showSuggestions = false;\n    }\n  }\n\n  initializeSkillsInput() {\n    const tagInput = document.getElementById('tagInput');\n    const tagContainer = document.getElementById('tagContainer');\n    const suggestions = document.getElementById('suggestions');\n    let selectedTags = [];\n    let activeSuggestionIndex = -1;\n    const availableTags = ['JavaScript', 'HTML', 'CSS', 'React', 'Vue', 'Angular', 'Node.js', 'TypeScript', 'Python', 'Java', 'PHP Ascendantframeworks', 'PHP', 'Ruby', 'Swift', 'Kotlin', 'Go', 'Rust', 'C#', 'C++', 'MongoDB', 'MySQL', 'PostgreSQL', 'Redis', 'GraphQL', 'REST API'];\n\n    const filterSuggestions = input => {\n      if (!input) return [];\n      const inputLower = input.toLowerCase();\n      return availableTags.filter(tag => tag.toLowerCase().includes(inputLower) && !selectedTags.includes(tag));\n    };\n\n    const showSuggestions = filteredSuggestions => {\n      suggestions.innerHTML = '';\n\n      if (filteredSuggestions.length === 0) {\n        suggestions.style.display = 'none';\n        return;\n      }\n\n      filteredSuggestions.forEach((suggestion, index) => {\n        const item = document.createElement('div');\n        item.className = 'suggestion-item';\n        item.textContent = suggestion;\n        item.addEventListener('click', () => {\n          addTag(suggestion);\n          tagInput.value = '';\n          suggestions.style.display = 'none';\n          tagInput.focus();\n        });\n        suggestions.appendChild(item);\n      });\n      suggestions.style.display = 'block';\n      activeSuggestionIndex = -1;\n    };\n\n    const addTag = text => {\n      if (!text || selectedTags.includes(text)) return;\n      selectedTags.push(text);\n      this.jobForm.patchValue({\n        skills: selectedTags\n      });\n      const tag = document.createElement('div');\n      tag.className = 'tag';\n      const tagText = document.createElement('span');\n      tagText.textContent = text;\n      tag.appendChild(tagText);\n      const removeBtn = document.createElement('button');\n      removeBtn.textContent = '×';\n      removeBtn.addEventListener('click', () => {\n        tag.remove();\n        selectedTags = selectedTags.filter(t => t !== text);\n        this.jobForm.patchValue({\n          skills: selectedTags\n        });\n      });\n      tag.appendChild(removeBtn);\n      tagContainer.insertBefore(tag, tagInput);\n    };\n\n    const navigateSuggestions = direction => {\n      const items = suggestions.querySelectorAll('.suggestion-item');\n      if (items.length === 0) return;\n\n      if (activeSuggestionIndex >= 0 && activeSuggestionIndex < items.length) {\n        items[activeSuggestionIndex].classList.remove('active-suggestion');\n      }\n\n      if (direction === 'down') {\n        activeSuggestionIndex = (activeSuggestionIndex + 1) % items.length;\n      } else {\n        activeSuggestionIndex = activeSuggestionIndex <= 0 ? items.length - 1 : activeSuggestionIndex - 1;\n      }\n\n      items[activeSuggestionIndex].classList.add('active-suggestion');\n      items[activeSuggestionIndex].scrollIntoView({\n        block: 'nearest'\n      });\n    };\n\n    tagInput.addEventListener('input', () => {\n      const filteredSuggestions = filterSuggestions(tagInput.value);\n      showSuggestions(filteredSuggestions);\n    });\n    tagInput.addEventListener('keydown', e => {\n      if (e.key === 'Enter') {\n        e.preventDefault();\n        const items = suggestions.querySelectorAll('.suggestion-item');\n\n        if (activeSuggestionIndex >= 0 && activeSuggestionIndex < items.length) {\n          addTag(items[activeSuggestionIndex].textContent || '');\n        } else if (tagInput.value) {\n          addTag(tagInput.value);\n        }\n\n        tagInput.value = '';\n        suggestions.style.display = 'none';\n      } else if (e.key === 'ArrowDown') {\n        e.preventDefault();\n        navigateSuggestions('down');\n      } else if (e.key === 'ArrowUp') {\n        e.preventDefault();\n        navigateSuggestions('up');\n      } else if (e.key === 'Backspace' && !tagInput.value) {\n        const lastIndex = selectedTags.length - 1;\n\n        if (lastIndex >= 0) {\n          const lastTag = selectedTags[lastIndex];\n          selectedTags.pop();\n          this.jobForm.patchValue({\n            skills: selectedTags\n          });\n          const tags = tagContainer.querySelectorAll('.tag');\n          tags[tags.length - 1].remove();\n        }\n      } else if (e.key === 'Escape') {\n        suggestions.style.display = 'none';\n      }\n    });\n    document.addEventListener('click', e => {\n      if (!tagContainer.contains(e.target) && !suggestions.contains(e.target)) {\n        suggestions.style.display = 'none';\n      }\n    });\n    tagContainer.addEventListener('click', e => {\n      if (e.target === tagContainer) {\n        tagInput.focus();\n      }\n    });\n  }\n\n  submitJobPost() {\n    if (this.jobForm.invalid) {\n      this.snackBar.open('Please fill all required fields correctly.', 'Close', {\n        duration: 5000\n      });\n      this.jobForm.markAllAsTouched();\n      return;\n    }\n\n    const token = this.corporateAuthService.getJWTToken();\n\n    if (!token) {\n      this.snackBar.open('Authentication required. Please log in.', 'Close', {\n        duration: 5000\n      });\n      this.router.navigate(['/login-corporate']);\n      return;\n    }\n\n    const formValues = this.jobForm.value;\n    const jobDetails = Object.assign(Object.assign({}, formValues), {\n      skills: {\n        primary: formValues.skills.slice(0, Math.ceil(formValues.skills.length / 2)).map(skill => ({\n          skill,\n          skill_confidence: 0.9,\n          type_confidence: 0.9\n        })),\n        secondary: formValues.skills.slice(Math.ceil(formValues.skills.length / 2)).map(skill => ({\n          skill,\n          skill_confidence: 0.8,\n          type_confidence: 0.8\n        }))\n      }\n    });\n    this.jobDescriptionService.saveJobPost(jobDetails, token).subscribe({\n      next: () => {\n        this.snackBar.open('Job post created successfully.', 'Close', {\n          duration: 3000\n        });\n        this.resetForm();\n        this.router.navigate(['/job-posted']);\n      },\n      error: error => {\n        this.snackBar.open(`Job post creation failed: ${error.message || 'Unknown error'}`, 'Close', {\n          duration: 5000\n        });\n      }\n    });\n  }\n\n  cancelJobPost() {\n    this.resetForm();\n    this.router.navigate(['/dashboard']);\n  }\n\n  resetForm() {\n    this.jobForm.reset({\n      role: '',\n      location: '',\n      job_type: '',\n      workplace_type: '',\n      total_experience_min: 0,\n      total_experience_max: 0,\n      relevant_experience_min: 0,\n      relevant_experience_max: 0,\n      budget_type: '',\n      min_budget: 0,\n      max_budget: 0,\n      notice_period: '',\n      skills: [],\n      job_description: '',\n      job_description_url: '',\n      unique_id: ''\n    });\n    this.jobForm.reset(); // Resets to initial values: 0-30 for experience ranges\n\n    this.selectedFile = null;\n\n    if (this.fileInput) {\n      this.fileInput.nativeElement.value = '';\n    }\n\n    const tagContainer = document.getElementById('tagContainer');\n    const tags = tagContainer.querySelectorAll('.tag');\n    tags.forEach(tag => tag.remove());\n    this.updateExperienceUI(); // Sync UI with reset form values\n  }\n\n};\n\n__decorate([ViewChild('locationInput')], CreateJobPost1stPageComponent.prototype, \"locationInput\", void 0);\n\n__decorate([ViewChild('suggestionsContainer')], CreateJobPost1stPageComponent.prototype, \"suggestionsContainer\", void 0);\n\n__decorate([ViewChild('fileInput')], CreateJobPost1stPageComponent.prototype, \"fileInput\", void 0);\n\nCreateJobPost1stPageComponent = __decorate([Component({\n  selector: 'create-job-post-1st-page',\n  templateUrl: './create-job-post-1st-page.component.html',\n  styleUrls: ['./create-job-post-1st-page.component.css']\n})], CreateJobPost1stPageComponent);\nexport { CreateJobPost1stPageComponent };","map":null,"metadata":{},"sourceType":"module"}