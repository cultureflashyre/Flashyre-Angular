{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"ngx-spinner\";\nexport let TrialAssessmentService = /*#__PURE__*/(() => {\n  class TrialAssessmentService {\n    constructor(http, spinner) {\n      this.http = http;\n      this.spinner = spinner;\n      this.apiUrl = environment.apiUrl; // Uses environment-based URL\n    } // Fetch trial assessment data including sections, questions, and timer duration\n\n\n    getAssessmentDetails(assessmentId) {\n      this.spinner.show(); // Show spinner before making the request\n\n      const token = localStorage.getItem('token'); // Retrieve JWT token\n\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`\n      });\n      return new Observable(observer => {\n        this.http.get(`${this.apiUrl}/assessments/?assessment_id=${assessmentId}`, {\n          headers\n        }).subscribe({\n          next: response => {\n            this.spinner.hide(); // Hide spinner on successful response\n\n            observer.next(response);\n            observer.complete();\n          },\n          error: error => {\n            this.spinner.hide(); // Hide spinner on error\n\n            observer.error(error);\n          }\n        });\n      });\n    } // Submit trial assessment answers\n\n\n    submitAssessment(data) {\n      this.spinner.show(); // Show spinner before submitting\n\n      const token = localStorage.getItem('token'); // Retrieve JWT token\n\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`\n      });\n      return new Observable(observer => {\n        this.http.post(`${this.apiUrl}/submit-assessment/`, data, {\n          headers\n        }).subscribe({\n          next: response => {\n            this.spinner.hide(); // Hide spinner on successful submission\n\n            observer.next(response);\n            observer.complete();\n          },\n          error: error => {\n            this.spinner.hide(); // Hide spinner on error\n\n            observer.error(error);\n          }\n        });\n      });\n    }\n\n  }\n\n  TrialAssessmentService.ɵfac = function TrialAssessmentService_Factory(t) {\n    return new (t || TrialAssessmentService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.NgxSpinnerService));\n  };\n\n  TrialAssessmentService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: TrialAssessmentService,\n    factory: TrialAssessmentService.ɵfac,\n    providedIn: 'root'\n  });\n  return TrialAssessmentService;\n})();","map":null,"metadata":{},"sourceType":"module"}