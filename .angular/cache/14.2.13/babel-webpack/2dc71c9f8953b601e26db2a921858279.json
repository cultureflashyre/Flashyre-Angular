{"ast":null,"code":"// proctoring.service.ts\nimport { NgZone } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport let ProctoringService = /*#__PURE__*/(() => {\n  class ProctoringService {\n    constructor(router, ngZone) {\n      this.router = router;\n      this.ngZone = ngZone;\n    }\n\n    startMonitoring() {\n      console.log('[ProctoringService] startMonitoring called');\n      this.setupProctoringListeners();\n    }\n\n    stopMonitoring() {\n      console.log('[ProctoringService] stopMonitoring called');\n      document.removeEventListener('visibilitychange', this.visibilityHandler);\n      window.removeEventListener('blur', this.blurHandler);\n    }\n\n    setupProctoringListeners() {\n      this.visibilityHandler = () => {\n        console.log('[ProctoringService] visibilitychange event:', document.hidden);\n        if (document.hidden) this.handleViolation();\n      };\n\n      this.blurHandler = () => {\n        console.log('[ProctoringService] blur event triggered');\n        this.handleViolation();\n      };\n\n      document.addEventListener('visibilitychange', this.visibilityHandler);\n      window.addEventListener('blur', this.blurHandler);\n    }\n\n    handleViolation() {\n      console.log('[ProctoringService] handleViolation called');\n      this.ngZone.run(() => {\n        this.router.navigate(['/assessment-violation-message'], {\n          state: {\n            message: \"Test submitted automatically due to screen/app switching\"\n          }\n        });\n      });\n    }\n\n  }\n\n  ProctoringService.ɵfac = function ProctoringService_Factory(t) {\n    return new (t || ProctoringService)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i0.NgZone));\n  };\n\n  ProctoringService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ProctoringService,\n    factory: ProctoringService.ɵfac,\n    providedIn: 'root'\n  });\n  return ProctoringService;\n})();","map":null,"metadata":{},"sourceType":"module"}