{"ast":null,"code":"import { throwError } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let JobDescriptionService = /*#__PURE__*/(() => {\n  class JobDescriptionService {\n    constructor(http) {\n      this.http = http; // Base URL for Django backend (update to match your environment)\n\n      this.API_BASE_URL = 'http://localhost:8000';\n    } // Upload file to Google Cloud Storage via Django endpoint\n\n\n    uploadFile(file, token) {\n      const formData = new FormData();\n      formData.append('file', file, file.name);\n      return this.http.post(`${this.API_BASE_URL}/file-upload/`, formData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).pipe(catchError(this.handleError));\n    } // Process job description with AI via Django endpoint\n\n\n    processJobDescription(fileUrl, uniqueId, token) {\n      const payload = {\n        file_url: fileUrl,\n        unique_id: uniqueId\n      };\n      return this.http.post(`${this.API_BASE_URL}/ai-process/`, payload, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).pipe(tap(response => {\n        // Store MCQs in local storage\n        localStorage.setItem('job_mcqs', JSON.stringify(response.mcqs));\n      }), catchError(this.handleError));\n    } // Save job post to Django backend\n\n\n    saveJobPost(jobDetails, token) {\n      return this.http.post(`${this.API_BASE_URL}/job-post/`, jobDetails, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).pipe(catchError(this.handleError));\n    } // Store MCQs in local storage (utility method)\n\n\n    storeMCQs(mcqs) {\n      localStorage.setItem('job_mcqs', JSON.stringify(mcqs));\n    } // Retrieve MCQs from local storage\n\n\n    getMCQs() {\n      const mcqs = localStorage.getItem('job_mcqs');\n      return mcqs ? JSON.parse(mcqs) : null;\n    } // Handle HTTP errors\n\n\n    handleError(error) {\n      var _a;\n\n      let errorMessage = 'An unknown error occurred';\n\n      if (error.error instanceof ErrorEvent) {\n        // Client-side error\n        errorMessage = `Client error: ${error.error.message}`;\n      } else {\n        // Server-side error\n        errorMessage = `Server error: ${error.status} - ${((_a = error.error) === null || _a === void 0 ? void 0 : _a.error) || error.message}`;\n      }\n\n      return throwError(() => new Error(errorMessage));\n    }\n\n  }\n\n  JobDescriptionService.ɵfac = function JobDescriptionService_Factory(t) {\n    return new (t || JobDescriptionService)(i0.ɵɵinject(i1.HttpClient));\n  };\n\n  JobDescriptionService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: JobDescriptionService,\n    factory: JobDescriptionService.ɵfac,\n    providedIn: 'root'\n  });\n  return JobDescriptionService;\n})();","map":null,"metadata":{},"sourceType":"module"}