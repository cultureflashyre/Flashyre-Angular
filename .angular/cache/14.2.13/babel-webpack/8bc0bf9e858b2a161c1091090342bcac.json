{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Output, EventEmitter, Input } from '@angular/core';\nlet JobCardsComponent = class JobCardsComponent {\n  constructor(jobService, jobSelectionService) {\n    this.jobService = jobService;\n    this.jobSelectionService = jobSelectionService;\n    this.rootClassName = '';\n    this.text = null;\n    this.text1 = null;\n    this.text2 = null;\n    this.jobSelected = new EventEmitter();\n    this.loading = false;\n    this.errorMessage = null;\n    this.jobs = [];\n    this.displayJobs = []; // Jobs to display, reordered based on selection\n\n    this.clickedIndex = null;\n  }\n\n  ngOnInit() {\n    this.fetchJobs();\n    this.subscription = this.jobSelectionService.selectedJob$.subscribe(selection => {\n      if (selection) {\n        this.reorderJobs(selection.jobId, selection.job);\n        this.selectJob(selection.jobId);\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n  fetchJobs() {\n    this.loading = true;\n    this.errorMessage = null;\n    this.jobService.fetchJobs().subscribe({\n      next: data => {\n        console.log('Jobs fetched:', data);\n        console.log('Available job IDs:', data.map(job => job.job_id));\n        this.jobs = data;\n        this.displayJobs = [...this.jobs]; // Initialize displayJobs\n\n        this.loading = false;\n      },\n      error: err => {\n        console.error('Error fetching jobs:', err);\n        this.errorMessage = err.message || 'Failed to load jobs. Please try again later.';\n        this.jobs = [];\n        this.displayJobs = [];\n        this.loading = false;\n      }\n    });\n  }\n\n  reorderJobs(selectedJobId, selectedJob) {\n    // Ensure the selected job is in the list; if not, add it\n    const jobExists = this.jobs.find(job => job.job_id === selectedJobId);\n\n    if (!jobExists) {\n      this.jobs.unshift(selectedJob);\n    } // Reorder displayJobs: selected job first, then others\n\n\n    this.displayJobs = [this.jobs.find(job => job.job_id === selectedJobId), ...this.jobs.filter(job => job.job_id !== selectedJobId)].filter(job => job); // Remove undefined entries\n\n    this.clickedIndex = 0; // Highlight the first job (selected)\n  }\n\n  selectJob(jobId) {\n    console.log('Emitting jobId:', jobId);\n    this.jobSelected.emit(jobId);\n  }\n\n  onContainerClick(index) {\n    this.clickedIndex = index;\n    const jobId = this.displayJobs[index].job_id;\n    this.selectJob(jobId);\n  }\n\n};\n\n__decorate([Input()], JobCardsComponent.prototype, \"rootClassName\", void 0);\n\n__decorate([Input()], JobCardsComponent.prototype, \"text\", void 0);\n\n__decorate([Input()], JobCardsComponent.prototype, \"text1\", void 0);\n\n__decorate([Input()], JobCardsComponent.prototype, \"text2\", void 0);\n\n__decorate([Output()], JobCardsComponent.prototype, \"jobSelected\", void 0);\n\nJobCardsComponent = __decorate([Component({\n  selector: 'job-cards',\n  templateUrl: './job-cards.component.html',\n  styleUrls: ['./job-cards.component.css']\n})], JobCardsComponent);\nexport { JobCardsComponent };","map":null,"metadata":{},"sourceType":"module"}