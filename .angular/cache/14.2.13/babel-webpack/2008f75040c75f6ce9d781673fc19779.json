{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input, ContentChild, ViewChild, ViewChildren } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { environment } from '../../../environments/environment';\nlet ProfileCertificationsComponent = class ProfileCertificationsComponent {\n  constructor(fb, spinner) {\n    this.fb = fb;\n    this.spinner = spinner;\n    this.baseUrl = environment.apiUrl;\n    this.rootClassName = '';\n    this.certificationForm = this.fb.group({\n      certifications: this.fb.array([this.createCertificationGroup()])\n    });\n  }\n\n  ngOnInit() {\n    this.todayDate = new Date().toISOString().split('T')[0];\n  }\n\n  get certifications() {\n    return this.certificationForm.get('certifications');\n  }\n\n  createCertificationGroup(data = {}) {\n    return this.fb.group({\n      certificate_name: [data.certificate_name || '', Validators.required],\n      issuing_institute: [data.issuing_institute || '', Validators.required],\n      issued_date: [data.issued_date || '', Validators.required],\n      renewal_date: [data.renewal_date || ''],\n      credentials: [data.credentials || '', Validators.required]\n    });\n  }\n\n  addCertification() {\n    this.certifications.push(this.createCertificationGroup());\n    setTimeout(() => {\n      this.scrollToLastCertification();\n    }, 0);\n  }\n\n  removeCertification(index) {\n    if (this.certifications.length > 1) {\n      this.certifications.removeAt(index);\n    }\n  }\n\n  scrollToLastCertification() {\n    const blocks = this.certificationBlocks.toArray();\n\n    if (blocks.length > 0 && this.scrollContainer) {\n      const lastBlock = blocks[blocks.length - 1].nativeElement;\n      const container = this.scrollContainer.nativeElement;\n      const blockOffsetTop = lastBlock.offsetTop - container.offsetTop;\n      container.scrollTo({\n        top: blockOffsetTop,\n        behavior: 'smooth'\n      });\n    }\n  }\n\n  updateRenewalDateMin(index) {\n    var _a;\n\n    const certification = this.certifications.at(index);\n    const issuedDate = (_a = certification.get('issued_date')) === null || _a === void 0 ? void 0 : _a.value;\n    const renewalDateControl = certification.get('renewal_date');\n\n    if (issuedDate) {\n      const renewalDate = renewalDateControl === null || renewalDateControl === void 0 ? void 0 : renewalDateControl.value;\n      const today = new Date(this.todayDate);\n      const issued = new Date(issuedDate);\n      const renewal = renewalDate ? new Date(renewalDate) : null;\n\n      if (renewal && (renewal < issued || renewal > today)) {\n        renewalDateControl === null || renewalDateControl === void 0 ? void 0 : renewalDateControl.setValue('');\n      }\n    }\n  }\n\n  isFormValid() {\n    return this.certificationForm.valid && this.certifications.length > 0;\n  }\n\n  getFormData() {\n    return this.certifications.controls.filter(control => control.valid).map(control => control.value);\n  }\n\n  resetForm() {\n    this.certifications.clear();\n    this.certifications.push(this.createCertificationGroup());\n  }\n\n};\n\n__decorate([ContentChild('text1')], ProfileCertificationsComponent.prototype, \"text1\", void 0);\n\n__decorate([ContentChild('text312')], ProfileCertificationsComponent.prototype, \"text312\", void 0);\n\n__decorate([ContentChild('text1111')], ProfileCertificationsComponent.prototype, \"text1111\", void 0);\n\n__decorate([ContentChild('text311')], ProfileCertificationsComponent.prototype, \"text311\", void 0);\n\n__decorate([ContentChild('text1121')], ProfileCertificationsComponent.prototype, \"text1121\", void 0);\n\n__decorate([ContentChild('text3121')], ProfileCertificationsComponent.prototype, \"text3121\", void 0);\n\n__decorate([ContentChild('text11')], ProfileCertificationsComponent.prototype, \"text11\", void 0);\n\n__decorate([Input()], ProfileCertificationsComponent.prototype, \"rootClassName\", void 0);\n\n__decorate([ContentChild('text112')], ProfileCertificationsComponent.prototype, \"text112\", void 0);\n\n__decorate([ContentChild('text111')], ProfileCertificationsComponent.prototype, \"text111\", void 0);\n\n__decorate([ContentChild('text')], ProfileCertificationsComponent.prototype, \"text\", void 0);\n\n__decorate([ContentChild('text31')], ProfileCertificationsComponent.prototype, \"text31\", void 0);\n\n__decorate([ContentChild('text3111')], ProfileCertificationsComponent.prototype, \"text3111\", void 0);\n\n__decorate([ViewChild('scrollContainer', {\n  static: false\n})], ProfileCertificationsComponent.prototype, \"scrollContainer\", void 0);\n\n__decorate([ViewChildren('certificationBlock')], ProfileCertificationsComponent.prototype, \"certificationBlocks\", void 0);\n\nProfileCertificationsComponent = __decorate([Component({\n  selector: 'profile-certifications-component',\n  templateUrl: 'profile-certifications-component.component.html',\n  styleUrls: ['profile-certifications-component.component.css']\n})], ProfileCertificationsComponent);\nexport { ProfileCertificationsComponent };","map":null,"metadata":{},"sourceType":"module"}