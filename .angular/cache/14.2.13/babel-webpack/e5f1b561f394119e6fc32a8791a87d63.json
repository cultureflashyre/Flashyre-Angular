{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { throwError } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let JobDescriptionService = /*#__PURE__*/(() => {\n  class JobDescriptionService {\n    constructor(http) {\n      this.http = http;\n      this.apiUrl = environment.apiUrl;\n    }\n\n    uploadFile(file, token) {\n      if (!file) {\n        console.error('No file provided for upload');\n        return throwError(() => new Error('No file selected for upload'));\n      }\n\n      const formData = new FormData();\n      formData.append('file', file, file.name);\n      const headers = new HttpHeaders({\n        Authorization: `Bearer ${token}`\n      });\n      return this.http.post(`${this.apiUrl}/file-upload/`, formData, {\n        headers\n      }).pipe(map(response => ({\n        file_url: response.file_url,\n        unique_id: response.unique_id\n      })), catchError(error => this.handleError(error)));\n    }\n\n    processJobDescription(fileUrl, uniqueId, token) {\n      const headers = new HttpHeaders({\n        Authorization: `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      });\n      const payload = {\n        file_url: fileUrl,\n        unique_id: uniqueId\n      };\n      return this.http.post(`${this.apiUrl}ai_process/`, payload, {\n        headers\n      }).pipe(map(response => ({\n        job_details: response.job_details,\n        mcqs: response.mcqs,\n        unique_id: response.unique_id\n      })), catchError(this.handleError));\n    }\n\n    saveJobPost(jobDetails, token) {\n      const headers = new HttpHeaders({\n        Authorization: `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      });\n      return this.http.post(`${this.apiUrl}/api/job-posts/`, jobDetails, {\n        headers\n      }).pipe(catchError(this.handleError));\n    }\n\n    handleError(error) {\n      let errorMessage = 'An unknown error occurred';\n\n      if (error.error instanceof ErrorEvent) {\n        errorMessage = `Client-side error: ${error.error.message}`;\n      } else {\n        if (error.status === 401) {\n          errorMessage = 'Unauthorized: Please log in again.';\n        } else if (error.status === 400 && error.error) {\n          const errors = error.error;\n          errorMessage = Object.keys(errors).map(key => `${key}: ${errors[key].join(', ')}`).join('; ');\n        } else {\n          errorMessage = `Server error: ${error.status} - ${error.message}`;\n        }\n      }\n\n      return throwError(() => new Error(errorMessage));\n    }\n\n  }\n\n  JobDescriptionService.ɵfac = function JobDescriptionService_Factory(t) {\n    return new (t || JobDescriptionService)(i0.ɵɵinject(i1.HttpClient));\n  };\n\n  JobDescriptionService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: JobDescriptionService,\n    factory: JobDescriptionService.ɵfac,\n    providedIn: 'root'\n  });\n  return JobDescriptionService;\n})();","map":null,"metadata":{},"sourceType":"module"}