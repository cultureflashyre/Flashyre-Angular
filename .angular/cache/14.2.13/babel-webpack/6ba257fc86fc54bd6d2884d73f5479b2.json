{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet LoginCandidate = class LoginCandidate {\n  constructor(title, meta, candidateService, userProfileService, router, spinner) {\n    this.title = title;\n    this.meta = meta;\n    this.candidateService = candidateService;\n    this.userProfileService = userProfileService;\n    this.router = router;\n    this.spinner = spinner;\n    this.errorMessage = '';\n    this.title.setTitle('Login-Candidate - Flashyre');\n    this.meta.addTags([{\n      property: 'og:title',\n      content: 'Login-Candidate - Flashyre'\n    }, {\n      property: 'og:image',\n      content: 'your-og-image-url'\n    }]);\n  }\n\n  onLoginSubmit(event) {\n    this.spinner.show();\n    this.candidateService.login(event.email, event.password).subscribe(response => {\n      if (response.access) {\n        // Check for token in response\n        console.log(\"Response Access Token: \", response.access);\n        localStorage.setItem('jwtToken', response.access); // Store the access token\n        // Fetch user profile after successful login\n\n        this.userProfileService.fetchUserProfile().subscribe(() => {\n          this.errorMessage = '';\n          this.router.navigate(['/candidate-home']);\n        }, profileError => {\n          console.error('Error fetching profile', profileError); // Navigate anyway, but with a warning\n\n          this.router.navigate(['/candidate-home']);\n        });\n      } else {\n        this.errorMessage = response.access;\n      }\n\n      this.spinner.hide();\n    }, error => {\n      var _a;\n\n      this.errorMessage = ((_a = error.error) === null || _a === void 0 ? void 0 : _a.error) || 'Login failed';\n      this.spinner.hide();\n    });\n  }\n\n};\nLoginCandidate = __decorate([Component({\n  selector: 'login-candidate',\n  templateUrl: 'login-candidate.component.html',\n  styleUrls: ['login-candidate.component.css']\n})], LoginCandidate);\nexport { LoginCandidate };","map":null,"metadata":{},"sourceType":"module"}