{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport let JobCreationWorkflowService = /*#__PURE__*/(() => {\n  class JobCreationWorkflowService {\n    constructor() {\n      this.STORAGE_KEY = 'jobCreationUniqueId'; // BehaviorSubject allows components to subscribe to the current ID\n\n      this.currentJobId = new BehaviorSubject(null);\n      this.currentJobId$ = this.currentJobId.asObservable(); // When the service is instantiated, try to load the ID from session storage.\n      // This handles the case where the user refreshes the page.\n\n      const savedId = sessionStorage.getItem(this.STORAGE_KEY);\n\n      if (savedId) {\n        this.currentJobId.next(savedId);\n      }\n    }\n    /**\r\n     * Starts the job creation flow by setting the unique ID.\r\n     * @param uniqueId The ID of the job post created in the first step.\r\n     */\n\n\n    startWorkflow(uniqueId) {\n      if (!uniqueId) {\n        console.error(\"Workflow cannot be started with a null or empty uniqueId.\");\n        return;\n      }\n\n      sessionStorage.setItem(this.STORAGE_KEY, uniqueId);\n      this.currentJobId.next(uniqueId);\n    }\n    /**\r\n     * Retrieves the current job ID synchronously.\r\n     * @returns The unique ID string or null if not in a workflow.\r\n     */\n\n\n    getCurrentJobId() {\n      return this.currentJobId.getValue();\n    }\n    /**\r\n     * Clears the workflow state. This should be called when the user\r\n     * cancels, finishes, or saves the draft to exit the flow.\r\n     */\n\n\n    clearWorkflow() {\n      sessionStorage.removeItem(this.STORAGE_KEY);\n      this.currentJobId.next(null);\n    }\n\n  }\n\n  JobCreationWorkflowService.ɵfac = function JobCreationWorkflowService_Factory(t) {\n    return new (t || JobCreationWorkflowService)();\n  };\n\n  JobCreationWorkflowService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: JobCreationWorkflowService,\n    factory: JobCreationWorkflowService.ɵfac,\n    providedIn: 'root'\n  });\n  return JobCreationWorkflowService;\n})();","map":null,"metadata":{},"sourceType":"module"}