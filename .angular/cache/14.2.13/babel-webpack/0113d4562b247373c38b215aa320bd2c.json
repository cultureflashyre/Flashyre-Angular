{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nlet ProfileOverviewPage = class ProfileOverviewPage {\n  constructor(title, meta, profileService, employmentService, educationService, certificationService, spinner, router, snackBar) {\n    this.title = title;\n    this.meta = meta;\n    this.profileService = profileService;\n    this.employmentService = employmentService;\n    this.educationService = educationService;\n    this.certificationService = certificationService;\n    this.spinner = spinner;\n    this.router = router;\n    this.snackBar = snackBar;\n    this.currentStep = 1;\n    this.isSaving = false; // Basic Information\n\n    this.firstName = '';\n    this.lastName = '';\n    this.email = '';\n    this.phoneNumber = '';\n    this.profilePicture = null;\n    this.resume = null;\n    this.resumeName = '';\n    this.imageSrc = '';\n    this.defaultImageSrc = 'https://storage.googleapis.com/cv-storage-sample1/placeholder_images/profile-placeholder.jpg';\n    this.title.setTitle('Profile Overview - Flashyre');\n    this.meta.addTags([{\n      property: 'og:title',\n      content: 'Profile Overview - Flashyre'\n    }, {\n      property: 'og:image',\n      content: 'https://aheioqhobo.cloudimg.io/v7/_playground-bucket-v2.teleporthq.io_/8203932d-6f2d-4493-a7b2-7000ee521aa2/9aea8e9c-27ce-4011-a345-94a92ae2dbf8?org_if_sml=1&force_format=original'\n    }]);\n    console.log('ProfileOverviewPage constructor executed');\n  }\n\n  ngOnInit() {\n    console.log('ngOnInit called');\n    const profileData = localStorage.getItem('userProfile');\n\n    if (profileData) {\n      try {\n        const userProfile = JSON.parse(profileData);\n        this.firstName = userProfile.first_name || '';\n        this.lastName = userProfile.last_name || '';\n        this.email = userProfile.email || '';\n        this.phoneNumber = userProfile.phone_number || '';\n        this.imageSrc = userProfile.profile_picture_url || '';\n        console.log('Loaded user profile from localStorage:', userProfile);\n      } catch (error) {\n        console.error('Error parsing userProfile from localStorage:', error);\n      }\n    } else {\n      console.log('No userProfile found in localStorage');\n    }\n  }\n\n  ngAfterViewInit() {\n    console.log('ngAfterViewInit called');\n    console.log('Current step:', this.currentStep);\n    console.log('profileComponent initialized:', !!this.profileComponent);\n    console.log('employmentComponent initialized:', !!this.employmentComponent);\n    console.log('educationComponent initialized:', !!this.educationComponent);\n    console.log('certificationComponent initialized:', !!this.certificationComponent);\n  }\n\n  ngOnDestroy() {\n    console.log('ngOnDestroy called');\n\n    if (this.imageSrc && this.imageSrc.startsWith('blob:')) {\n      URL.revokeObjectURL(this.imageSrc);\n      console.log('Revoked object URL for imageSrc');\n    }\n  } // --- Navigation ---\n\n\n  onSaveAndNext() {\n    return __awaiter(this, void 0, void 0, function* () {\n      console.log('onSaveAndNext called, currentStep:', this.currentStep);\n      this.isSaving = true;\n      this.spinner.show(); // Immediately switch to the next step\n\n      let previousStep = this.currentStep;\n\n      if (this.currentStep < 6) {\n        this.currentStep++;\n\n        if (this.currentStep === 4) {\n          console.log('Skipping step 4 as per logic.');\n          this.currentStep = 5; // Skip step 4\n        }\n\n        console.log('Navigated to step:', this.currentStep);\n      }\n\n      try {\n        let success = false;\n\n        switch (previousStep) {\n          case 1:\n            console.log('Saving profile information...');\n            success = yield this.profileComponent.saveProfile();\n            console.log('Profile save result:', success);\n            break;\n\n          case 2:\n            console.log('Saving employment information...');\n            success = yield this.employmentComponent.saveEmployment();\n            console.log('Employment save result:', success);\n            break;\n\n          case 3:\n            console.log('Saving education information...');\n            success = yield this.educationComponent.saveEducation();\n            console.log('Education save result:', success);\n            break;\n\n          case 5:\n            console.log('Saving certifications information...');\n            success = yield this.certificationComponent.saveCertifications();\n            console.log('Certifications save result:', success);\n            break;\n\n          default:\n            console.warn('Invalid step encountered:', previousStep);\n            this.snackBar.open('Invalid step. Please try again.', 'Close', {\n              duration: 3000,\n              panelClass: ['error-snackbar']\n            });\n            this.isSaving = false;\n            this.spinner.hide();\n            return;\n        }\n\n        if (success) {\n          console.log(`Step ${previousStep} saved successfully.`);\n          this.snackBar.open('âœ… Successfully Saved', 'Close', {\n            duration: 3000,\n            panelClass: ['success-snackbar']\n          });\n        } else {\n          console.warn(`Saving step ${previousStep} failed.`);\n          this.snackBar.open('Failed to upload', 'Close', {\n            duration: 3000,\n            panelClass: ['error-snackbar']\n          }); // Optionally revert to previous step if save fails\n\n          this.currentStep = previousStep;\n        }\n      } catch (error) {\n        console.error(`Exception caught during save at step ${previousStep}:`, error);\n        this.snackBar.open('Failed to upload', 'Close', {\n          duration: 3000,\n          panelClass: ['error-snackbar']\n        }); // Revert to previous step on error\n\n        this.currentStep = previousStep;\n      } finally {\n        this.isSaving = false;\n        this.spinner.hide();\n        console.log('onSaveAndNext completed, isSaving set to false');\n      }\n    });\n  }\n\n  onPrevious() {\n    if (this.currentStep > 1) {\n      this.currentStep--;\n\n      if (this.currentStep === 4) {\n        console.log('Skipping step 4 on previous, moving back to step 3');\n        this.currentStep = 3; // Skip step 4\n      }\n    }\n\n    console.log('onPrevious called, currentStep:', this.currentStep);\n  }\n\n  onSkip() {\n    if (this.currentStep < 6) {\n      this.currentStep++;\n\n      if (this.currentStep === 4) {\n        console.log('Skipping step 4 on skip, moving forward to step 5');\n        this.currentStep = 5; // Skip step 4\n      }\n    }\n\n    console.log('onSkip called, currentStep:', this.currentStep);\n  }\n\n  isStepVisible(step) {\n    const visible = this.currentStep === step;\n    console.log(`isStepVisible(${step}) called, returning:`, visible);\n    return visible;\n  }\n\n};\n\n__decorate([ViewChild('profilePictureInput')], ProfileOverviewPage.prototype, \"profilePictureInput\", void 0);\n\n__decorate([ViewChild('resumeInput')], ProfileOverviewPage.prototype, \"resumeInput\", void 0);\n\n__decorate([ViewChild('profileComponent')], ProfileOverviewPage.prototype, \"profileComponent\", void 0);\n\n__decorate([ViewChild('employmentComponent')], ProfileOverviewPage.prototype, \"employmentComponent\", void 0);\n\n__decorate([ViewChild('educationComponent')], ProfileOverviewPage.prototype, \"educationComponent\", void 0);\n\n__decorate([ViewChild('certificationComponent')], ProfileOverviewPage.prototype, \"certificationComponent\", void 0);\n\nProfileOverviewPage = __decorate([Component({\n  selector: 'profile-overview-page',\n  templateUrl: 'profile-overview-page.component.html',\n  styleUrls: ['profile-overview-page.component.css']\n})], ProfileOverviewPage);\nexport { ProfileOverviewPage };","map":null,"metadata":{},"sourceType":"module"}