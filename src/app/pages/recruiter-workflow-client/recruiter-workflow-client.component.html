<div class="recruiter-workflow-client-container10">
  <div *ngIf="isPageLoading" class="page-loading-overlay">
    <div class="round-loader"></div> <!-- Reusing your existing spinner class -->
    <p>Loading Clients...</p>
  </div>
  <div class="recruiter-workflow-client-container11">
    <recruiter-workflow-navbar
      rootClassName="recruiter-workflow-navbarroot-class-name4"
    >
      <ng-template #link1>
        <div class="recruiter-workflow-client-fragment10">
          <span class="recruiter-workflow-client-text10">Home</span>
        </div>
      </ng-template>
      <ng-template #link4>
        <div class="recruiter-workflow-client-fragment11">
          <span class="recruiter-workflow-client-text11">Requirments</span>
        </div>
      </ng-template>
      <ng-template #text1>
        <div class="recruiter-workflow-client-fragment12">
          <span class="recruiter-workflow-client-text12">Profile</span>
        </div>
      </ng-template>
      <ng-template #text2>
        <div class="recruiter-workflow-client-fragment13">
          <span class="recruiter-workflow-client-text13">Preference</span>
        </div>
      </ng-template>
      <ng-template #text3>
        <div class="recruiter-workflow-client-fragment14">
          <span class="recruiter-workflow-client-text14">Settings</span>
        </div>
      </ng-template>
      <ng-template #text7>
        <div class="recruiter-workflow-client-fragment15">
          <span class="recruiter-workflow-client-text15">Dashboard</span>
        </div>
      </ng-template>
      <ng-template #text9>
        <div class="recruiter-workflow-client-fragment16">
          <span class="recruiter-workflow-client-text16">Notifications</span>
        </div>
      </ng-template>
      <ng-template #text10>
        <div class="recruiter-workflow-client-fragment17">
          <span class="recruiter-workflow-client-text17">Jobs Posted</span>
        </div>
      </ng-template>
      <ng-template #text11>
        <div class="recruiter-workflow-client-fragment18">
          <span class="recruiter-workflow-client-text18">Preference</span>
        </div>
      </ng-template>
      <ng-template #text12>
        <div class="recruiter-workflow-client-fragment19">
          <span class="recruiter-workflow-client-text19">Settings</span>
        </div>
      </ng-template>
      <ng-template #text13>
        <div class="recruiter-workflow-client-fragment20">
          <span class="recruiter-workflow-client-text20">Logout</span>
        </div>
      </ng-template>
      <ng-template #text14>
        <div class="recruiter-workflow-client-fragment21">
          <span class="recruiter-workflow-client-text21">2</span>
        </div>
      </ng-template>
      <ng-template #text15>
        <div class="recruiter-workflow-client-fragment22">
          <span class="recruiter-workflow-client-text22">Leslie Alexander</span>
        </div>
      </ng-template>
      <ng-template #text16>
        <div class="recruiter-workflow-client-fragment23">
          <span class="recruiter-workflow-client-text23">Google</span>
        </div>
      </ng-template>
      <ng-template #text31>
        <div class="recruiter-workflow-client-fragment24">
          <span class="recruiter-workflow-client-text24">Logout</span>
        </div>
      </ng-template>
      <ng-template #text32>
        <div class="recruiter-workflow-client-fragment25">
          <span class="recruiter-workflow-client-text25">
            <span>Software Development</span>
            <br />
            <span>Mountain View, CA</span>
          </span>
        </div>
      </ng-template>
      <ng-template #text1411>
        <div class="recruiter-workflow-client-fragment26">
          <span class="recruiter-workflow-client-text29">2</span>
        </div>
      </ng-template>
    </recruiter-workflow-navbar>
    <div *ngIf="showForm || isFilterPanelVisible" class="form-background-blur-overlay"></div>
    <app-alert-message
      *ngIf="showAlert"
      [message]="alertMessage"
      [buttons]="alertButtons"
      (buttonClicked)="onAlertButtonClicked($event)"
      (close)="showAlert = false">
    </app-alert-message>
    <div *ngIf="showToast" 
         [ngClass]="isErrorToast ? 'error-toast-message' : 'success-toast-message'">
      
      <!-- Icon for Success (Checkmark) -->
      <svg *ngIf="!isErrorToast" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22 4 12 14.01 9 11.01"></polyline>
      </svg>

      <!-- Icon for Error (X Circle) -->
      <svg *ngIf="isErrorToast" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="15" y1="9" x2="9" y2="15"></line>
        <line x1="9" y1="9" x2="15" y2="15"></line>
      </svg>

      {{ toastMessage }}
    </div>
    <div class="recruiter-workflow-client-clients-listing-container">
      <!-- Add Client Button with functionality -->
      <div
        id="cv-jd-upload-container"
        class="recruiter-workflow-client-cvjd-upload-container"
        *ngIf="showList"
      >
        <button
          type="button" 
          (click)="openAddClientForm()"
          class="recruiter-workflow-client-add-questions-with-ai-button button"
        >
          <span class="recruiter-workflow-client-add-questions-with-ai-text">
            + Add Client
          </span>
        </button>
      </div>

      <!-- MAIN FORM START -->
      <form [formGroup]="mainForm" *ngIf="showForm" class="client-form-overlay">
        <div class="recruiter-workflow-client-recruiter-workflow-client-input-form">
          <div class="recruiter-workflow-client-container12" style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
            <span class="recruiter-workflow-client-text30">Client Input form</span>
            <svg
    (click)="closeForm()"
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
    style="cursor: pointer; color: #666;"
    class="close-icon"
  >
    <line x1="18" y1="6" x2="6" y2="18"></line>
    <line x1="6" y1="6" x2="18" y2="18"></line>
  </svg>
          </div>

          <!-- CLIENTS LOOP -->
          <ng-container formArrayName="clients">
            <div *ngFor="let client of clientsArray.controls; let i = index" [formGroupName]="i" 
                 style="border-bottom: 1px solid #e0e0e0; margin-bottom: 20px; padding-bottom: 20px; width: 100%;">
              
              <!-- Header for Client Block if multiple -->
              <div *ngIf="clientsArray.length > 1" style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                 <strong>Client #{{i + 1}}</strong>
                 <button type="button" (click)="removeClient(i)" style="color: red; border: none; background: none; cursor: pointer;">Remove Client</button>
              </div>

              <div class="recruiter-workflow-client-container13">
                
                <!-- ROW 1: Company Name (NEW) & Client Name -->
                <div class="recruiter-workflow-client-job-title-company-name-container">
                  
                  <!-- 1. Company Name (New Field) -->
                  <div
                    id="candidate-job-title"
                    class="recruiter-workflow-client-job-title-container"
                  >
                   <div
                      id="skill-text-container-1"
                      class="recruiter-workflow-client-skill-text-container-1"
                    >
                    <span class="recruiter-workflow-client-job-title-text">Company Name</span>
                    <span class="recruiter-workflow-client-skill-star-text">*</span>
                   </div>
                    <input 
                      type="text" 
                      formControlName="company_name" 
                      placeholder="Enter Company Name" 
                      class="recruiter-workflow-client-job-title-input1 input"/>
                    <!-- Validation Error -->
                    <div *ngIf="client.get('company_name')?.invalid && client.get('company_name')?.touched" style="color: red; font-size: 12px; margin-top: 4px;">
                      <span *ngIf="client.get('company_name')?.errors?.['required']">Company Name is required.</span>
                      <span *ngIf="client.get('company_name')?.errors?.['pattern']">Only alphabets and spaces allowed.</span>
                    </div>
                  </div>

                  <!-- 2. Client Name -->
                  <div
                    id="candidate-company-name-container"
                    class="recruiter-workflow-client-company-name-container"
                  >
                  <div
                      id="skill-text-container-2"
                      class="recruiter-workflow-client-skill-text-container-2"
                    >
                    <span class="recruiter-workflow-client-company-name-text">Client Name</span>
                    <span class="recruiter-workflow-client-skill-star-text">*</span>
                  </div>
                    <input 
                      type="text" 
                      formControlName="client_name" 
                      placeholder="Enter Client Name" 
                      class="recruiter-workflow-client-company-name-input input"/>
                    <!-- Validation Error -->
                    <div *ngIf="client.get('client_name')?.invalid && client.get('client_name')?.touched" style="color: red; font-size: 12px; margin-top: 4px;">
                        <span *ngIf="client.get('client_name')?.errors?.['required']">Client Name is required.</span>
                        <span *ngIf="client.get('client_name')?.errors?.['pattern']">Only alphabets and spaces allowed.</span>
                    </div>
                  </div>
                </div>

                <!-- ROW 2: Sub-Client & Description -->
                <div class="recruiter-workflow-client-job-title-company-name-container">
                  
                  <!-- 3. Sub Client Name -->
                  <div class="recruiter-workflow-client-job-title-container">
                      <span class="recruiter-workflow-client-job-title-text">Sub Client Name</span>
                      <input 
                        type="text" 
                        formControlName="sub_client_name" 
                        placeholder="Enter Sub-Client Name" 
                        class="recruiter-workflow-client-job-title-input1 input"/>
                      <div *ngIf="client.get('sub_client_name')?.invalid && client.get('sub_client_name')?.touched" style="color: red; font-size: 12px; margin-top: 4px;">
                          <span *ngIf="client.get('sub_client_name')?.errors?.['pattern']">Only alphabets and spaces allowed.</span>
                      </div>
                  </div>

                  <!-- 4. Client Description -->
                  <div
                    id="skills-container"
                    class="recruiter-workflow-client-skills-container"
                  >
                    <div
                      id="skill-text-container"
                      class="recruiter-workflow-client-skill-text-container"
                    >
                      <span class="recruiter-workflow-client-skill-text">Client Description</span>
                      <span class="recruiter-workflow-client-skill-star-text">*</span>
                    </div>
                    <input
                      type="text"
                      formControlName="client_description"
                      placeholder="Description" 
                      class="recruiter-workflow-client-job-title-input2 input"
                    />
                     <div *ngIf="client.get('client_description')?.invalid && client.get('client_description')?.touched" style="color: red; font-size: 12px; margin-top: 4px;">
                          <span *ngIf="client.get('client_description')?.errors?.['required']">Description is required.</span>
                     </div>
                  </div>
                </div>

                <!-- CONTACT INFORMATION (Nested FormArray) -->
                <div
  id="interview-process-container"
  class="recruiter-workflow-client-interview-process-container"
>
  <span
    id="interview-process-text"
    class="recruiter-workflow-client-interview-process-text"
  >
    Contact Information
  </span>
  
  <div
    id="different-stages-container"
    class="recruiter-workflow-client-different-stages-container" 
    formArrayName="contacts"
  >
    <!-- Loop through Contacts/Locations -->
    <div 
      *ngFor="let contact of getContactsArray(i).controls; let j = index" 
      [formGroupName]="j"
      id="different-stage-container"
      class="recruiter-workflow-client-different-stage-container"
    >
      <!-- Location -->
      <div>
        <input 
          type="text" 
          formControlName="location" 
          placeholder="Location" 
          class="recruiter-workflow-client-date-input1 input"
        />
        <!-- Error Handling -->
        <div *ngIf="contact.get('location')?.invalid && contact.get('location')?.touched" style="color: red; font-size: 12px;">
           <span *ngIf="contact.get('location')?.errors?.['required']">Required</span>
           <span *ngIf="contact.get('location')?.errors?.['pattern']">Must contain alphabets.</span>
        </div>
      </div>

      <!-- Spoc -->
      <div>
        <input 
          type="text" 
          formControlName="spoc_name" 
          placeholder="Spoc" 
          class="recruiter-workflow-client-date-input2 input"
        />
        <!-- Error Handling -->
        <div *ngIf="contact.get('spoc_name')?.invalid && contact.get('spoc_name')?.touched" style="color: red; font-size: 12px;">
           <span *ngIf="contact.get('spoc_name')?.errors?.['required']">Required</span>
           <span *ngIf="contact.get('spoc_name')?.errors?.['pattern']">Alphabets and spaces only.</span>
        </div>
      </div>

      <!-- Phone -->
      <div>
        <input 
          type="text" 
          formControlName="phone_number" 
          placeholder="Phone Number" 
          class="recruiter-workflow-client-date-input3 input"
        />
        <!-- Error Handling -->
        <div *ngIf="contact.get('phone_number')?.invalid && contact.get('phone_number')?.touched" style="color: red; font-size: 12px;">
           <span *ngIf="contact.get('phone_number')?.errors?.['required']">Required</span>
           <span *ngIf="contact.get('phone_number')?.errors?.['pattern']">Must be exactly 10 digits.</span>
        </div>
      </div>

      <!-- Email -->
      <div>
        <input 
          type="text" 
          formControlName="email" 
          placeholder="Email" 
          class="recruiter-workflow-client-date-input4 input"
        />
        <!-- Error Handling -->
        <div *ngIf="contact.get('email')?.invalid && contact.get('email')?.touched" style="color: red; font-size: 12px;">
           <span *ngIf="contact.get('email')?.errors?.['required']">Required</span>
           <span *ngIf="contact.get('email')?.errors?.['email']">
            Invalid Email format (e.g., user&#64;example.com).
          </span>
        </div>
      </div>

      <!-- Remove Icon -->
      <svg 
        (click)="confirmRemoveLocation(i, j)" 
        *ngIf="getContactsArray(i).length > 1"
        id="remove-icon" 
        width="24" 
        height="24" 
        viewBox="0 0 24 24" 
        class="recruiter-workflow-client-remove-icon"
        style="cursor: pointer;"
      >
        <path d="M19 13H5v-2h14z" fill="currentColor"></path>
      </svg>
    </div>
  </div>

  <div
    id="add-section-container"
    class="recruiter-workflow-client-add-section-container"
  >
    <span 
      (click)="addLocation(i)" 
      id="add-section-text"
      class="recruiter-workflow-client-add-section-text button"
      style="cursor: pointer;"
    >
      + Add Location
    </span>
    <span
      id="remove-section-text"
      class="recruiter-workflow-client-remove-section-text button"
    >
      - Remove Section
    </span>
  </div>
</div>


              </div>
            </div>
          </ng-container>
          <!-- END CLIENTS LOOP -->

          <div
           id="submit-cancel-buttons-container"
           class="recruiter-workflow-client-submit-cancel-buttons-container"
          >
            <button
              type="button" 
              (click)="closeForm()"
              class="recruiter-workflow-client-cancel-button button"
            >
              <span class="recruiter-workflow-client-cancel-text">Cancel</span>
            </button>
            <button
              type="button" 
              (click)="onSubmit()"
              class="recruiter-workflow-client-submit-button button"
            >
              <span class="recruiter-workflow-client-submit-text">Submit</span>
            </button>
          </div>
        </div>
      </form>
      <div *ngIf="isLoading" class="loader-container">
  <div class="round-loader"></div>
  <p>Saving Data...</p>
</div>
      <!-- MAIN FORM END -->

      <div class="recruiter-workflow-client-recruiter-workflow-client-list" *ngIf="showList">
        <ng-template #noData>
          <div style="display: flex; flex-direction: column; align-self: center; align-items: center; justify-content: center; height: 300px; color: #595959; text-align: center;">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" style="margin-bottom: 16px; color: #ccc;">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
            <span style="font-size: 20px; font-weight: 600;">No Clients Available</span>
            <span style="font-size: 14px; margin-top: 8px;">Click "+ Add Client" above to create your first client.</span>
          </div>
        </ng-template>

  <!-- 2. WRAPPER START for Existing Content -->
   <ng-container *ngIf="!isPageLoading">
  <ng-container *ngIf="masterClients.length > 0; else noData">

        <div
          id="select-filter-sort-download-zip-main-container"
          class="recruiter-workflow-client-select-filter-sort-download-zip-main-container"
        >
          <div class="recruiter-workflow-client-container14">
            <div
              id="select-all-main-container"
              class="recruiter-workflow-client-select-all-main-container1"
            >
              <input
                type="checkbox"
                id="select-checkbox"
                class="recruiter-workflow-client-select-checkbox1"
                (change)="toggleSelectAll($event)"
              />
              <span class="recruiter-workflow-client-select-all-text">
                Select All
              </span>
            </div>
            <!--
            <div class="recruiter-workflow-client-container15">
              <div
                id="select-all-main-container"
                class="recruiter-workflow-client-select-all-main-container2"
              >
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  class="recruiter-workflow-client-icon11"
                >
                  <path
                    d="M14 2H4v20h16V8zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3zm-3-7V3.5L18.5 9z"
                    fill="currentColor"
                  ></path>
                </svg>
                
                <div class="recruiter-workflow-client-container16">
                  <span>Add</span>
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    class="recruiter-workflow-client-icon13"
                  >
                    <path
                      d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"
                      fill="currentColor"
                      fill-rule="evenodd"
                    ></path>
                  </svg>
                </div>
                
              </div>
            </div> -->
          </div>
          <div
            id="filter-sort-download-zip-container"
            class="recruiter-workflow-client-filter-sort-download-zip-container"
          >
            <button
                *ngIf="isSuperUser"
                id="filtered-button"
                type="button"
                (click)="deleteSelectedClients()"
                class="recruiter-workflow-client-filtered-button1 button"
              >
                <span class="recruiter-workflow-client-start-process-text1">
                  Delete
                </span>
              </button>
              
            <!-- 1. FILTER BUTTON CONTAINER (Add position: relative) -->
            <div
              id="filtered-container"
              class="recruiter-workflow-client-filtered-container"
              style="position: relative;" 
              [style.zIndex]="isFilterPanelVisible ? '2001' : 'auto'"
            >
              
              <!-- Toggle Panel Button -->
              <button
                id="filtered-button"
                type="button"
                (click)="toggleFilterPanel()"
                class="recruiter-workflow-client-filtered-button2 button"
              >
                <span class="recruiter-workflow-client-start-process-text2">
                  Filtered By
                </span>
              </button>

              <!-- 2. NEW FILTER PANEL (Popup) -->
              <div *ngIf="isFilterPanelVisible" class="filter-panel">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                  <span style="font-weight: 600; font-size: 16px;">Filter Options</span>
                  <svg 
                    (click)="toggleFilterPanel()" 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="20" 
                    height="20" 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="2" 
                    stroke-linecap="round" 
                    stroke-linejoin="round" 
                    class="filter-close-icon"
                  >
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                  </svg>
                </div>
                <form [formGroup]="filterForm" class="filter-form-grid">
                  
                  <div class="filter-group">
                    <label>Company Name</label>
                    <input type="text" formControlName="company_name" placeholder="Search Company" class="input">
                    <div *ngIf="filterForm.get('company_name')?.invalid && (filterForm.get('company_name')?.touched || filterForm.get('company_name')?.dirty)" style="color: red; font-size: 11px;">
                      Alphabets and spaces only.
                    </div>
                  </div>

                  <div class="filter-group">
                    <label>Client Name</label>
                    <input type="text" formControlName="client_name" placeholder="Search Client" class="input">
                    <div *ngIf="filterForm.get('client_name')?.invalid && (filterForm.get('client_name')?.touched || filterForm.get('client_name')?.dirty)" style="color: red; font-size: 11px;">
                      Alphabets and spaces only.
                    </div>
                  </div>

                  <div class="filter-group">
                    <label>Location</label>
                    <input type="text" formControlName="location" placeholder="Search Location" class="input">
                    <div *ngIf="filterForm.get('location')?.invalid && (filterForm.get('location')?.touched || filterForm.get('location')?.dirty)" style="color: red; font-size: 11px;">
                      Must contain at least one alphabet.
                    </div>
                  </div>

                  <div class="filter-group">
                    <label>Created Date</label>
                    <input type="date" formControlName="date_created" class="input">
                  </div>

                </form>
                <div class="filter-panel-actions">
                  <button type="button" (click)="clearFilters()" class="button clear-button">Clear</button>
                  <button type="button" (click)="applyFiltersFromPanel()" class="button apply-button">Apply</button>
                </div>
              </div>

            </div>

            <!-- 3. UPDATED SORT DROPDOWN (Native Select) -->
            <div class="recruiter-workflow-client-sort-dropdown list-item" style="border-width: 1px; border-radius: 4px; border-color: #05356c; width: auto;">
              <select 
                class="recruiter-workflow-client-dropdown-toggle1" 
                (change)="sortClients($event)" 
                style="border: none; background: transparent; cursor: pointer; font-size: 16px; outline: none;"
              >
                <option value="none" selected>Sort</option>
                <option value="a-z">Company (A-Z)</option>
                <option value="z-a">Company (Z-A)</option>
                <option value="newest">Newest First</option>
                <option value="oldest">Oldest First</option>
              </select>
            </div>

          </div>
        </div>
        <ng-container *ngIf="existingClients.length > 0; else noMatches">
        <div class="recruiter-workflow-client-container17" *ngIf="existingClients.length > 0">
          <div *ngFor="let clientData of existingClients" class="recruiter-workflow-client-container18">
            
            <!-- LIST ITEM LOOP -->
            <div class="recruiter-workflow-client-container19">
              <div class="recruiter-workflow-client-container20">
                <div class="recruiter-workflow-client-container21">
                  <input type="checkbox" class="recruiter-workflow-client-select-checkbox2" [(ngModel)]="clientData.selected"/>
                </div>
                
                <div class="recruiter-workflow-client-container22">
                  <!-- Company Name -->
                  <span class="recruiter-workflow-client-text36">
                    {{ clientData.company_name }}
                  </span>
                  
                  <div class="recruiter-workflow-client-container23">
                    <div class="recruiter-workflow-client-container24">
                      <span class="recruiter-workflow-client-text37">Client</span>
                      <span class="recruiter-workflow-client-text38">{{ clientData.client_name }}</span>
                    </div>
                    <div class="recruiter-workflow-client-container25">
                      <span class="recruiter-workflow-client-text39">Sub Client</span>
                      <span class="recruiter-workflow-client-text40">{{ clientData.sub_client_name || '-' }}</span>
                    </div>
                  </div>

                  <!-- Table Header for Contacts -->
                  <div class="recruiter-workflow-client-container26">
                    <div class="recruiter-workflow-client-container27">
                      <div class="recruiter-workflow-client-container28"><h1 class="recruiter-workflow-client-text41">Location</h1></div>
                      <div class="recruiter-workflow-client-container29"><h1 class="recruiter-workflow-client-text42">Spoc</h1></div>
                      <div class="recruiter-workflow-client-container30"><h1 class="recruiter-workflow-client-text43">Phone Number</h1></div>
                      <div class="recruiter-workflow-client-container31"><h1 class="recruiter-workflow-client-text44">Email</h1></div>
                    </div>
                    
                    <!-- Contacts Loop -->
                    <div class="recruiter-workflow-client-container32">
                      <div *ngFor="let contact of clientData.contacts" class="recruiter-workflow-client-container33" style="margin-bottom: 5px;">
                        <div class="recruiter-workflow-client-container34">
                          <span class="recruiter-workflow-client-text45">{{ contact.location }}</span>
                        </div>
                        <div class="recruiter-workflow-client-container35">
                          <span class="recruiter-workflow-client-text46">{{ contact.spoc_name }}</span>
                        </div>
                        <div class="recruiter-workflow-client-container36">
                          <span class="recruiter-workflow-client-text47">{{ contact.phone_number }}</span>
                        </div>
                        <div class="recruiter-workflow-client-container37">
                          <span class="recruiter-workflow-client-text48">{{ contact.email }}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Action Icons (Static) -->
              <div class="recruiter-workflow-client-container38">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 1024 1024"
                  (click)="editClientClick(clientData)"
                  class="recruiter-workflow-client-icon17"
                >
                  <path
                    d="M761.1 288.3L687.8 215L325.1 577.6l-15.6 89l88.9-15.7z"
                    fill="currentColor"
                    fill-opacity=".15"
                  ></path>
                  <path
                    d="M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32m-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9m67.4-174.4L687.8 215l73.3 73.3l-362.7 362.6l-88.9 15.7z"
                    fill="currentColor"
                  ></path></svg
                >
                <!--
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  (click)="downloadClientData(clientData)"
                  class="recruiter-workflow-client-icon20"
                >
                  <path
                    d="M14 2H4v20h16V8zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3zm-3-7V3.5L18.5 9z"
                    fill="currentColor"
                  ></path></svg
                > -->
                <svg
                  *ngIf="isSuperUser"
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                  (click)="deleteSingleClient(clientData)"
                  class="recruiter-workflow-client-icon22"
                >
                  <path
                    d="M8.5 4h3a1.5 1.5 0 0 0-3 0m-1 0a2.5 2.5 0 0 1 5 0h5a.5.5 0 0 1 0 1h-1.054l-1.194 10.344A3 3 0 0 1 12.272 18H7.728a3 3 0 0 1-2.98-2.656L3.554 5H2.5a.5.5 0 0 1 0-1zM5.741 15.23A2 2 0 0 0 7.728 17h4.544a2 2 0 0 0 1.987-1.77L15.439 5H4.561zM8.5 7.5A.5.5 0 0 1 9 8v6a.5.5 0 0 1-1 0V8a.5.5 0 0 1 .5-.5M12 8a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"
                    fill="currentColor"
                  ></path>
                </svg>
              </div>
            </div>
            <div class="recruiter-workflow-client-container39">
  
  <!-- 1. RECRUITER NAME (First + Last) -->
  <div class="recruiter-workflow-client-container40">
    <span class="recruiter-workflow-client-text49">
      Recruiter : 
    </span>
    <!-- Now using the field from backend -->
    <span class="recruiter-workflow-client-text50">
      {{ clientData.recruiter_name }}
    </span>
  </div>

  <!-- 2. DATE (Created/Edited + Now/Yesterday) -->
  <div class="recruiter-workflow-client-container41">
    <!-- Use the helper function to get Label -->
    <span class="recruiter-workflow-client-text51">
      {{ getDateStatus(clientData).label }} 
    </span>
    
    <!-- Use the helper function to get Humanized Date -->
    <span class="recruiter-workflow-client-text52">
      {{ getHumanDate(getDateStatus(clientData).date) }}
    </span>
  </div>

</div>
            <!-- END LIST ITEM LOOP -->

          </div>
          
        </div>
        </ng-container>
        </ng-container>
        </ng-container>
        <ng-template #noMatches>
          <div style="text-align: center; align-self: center; padding: 40px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" style="color: #6b7280; margin-bottom: 16px;">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <h3 style="font-size: 1.125rem; font-weight: 600; color: #111827; margin-bottom: 8px;">No Matches Found</h3>
            <p style="color: #6b7280; margin-bottom: 24px;">No clients match your current filter criteria.</p>
            <button 
              (click)="clearFilters()" 
              type="button" 
              class="recruiter-workflow-client-filtered-button2 button" 
              style="width: auto; padding: 8px 20px; color: #05356c; background-color: white;"
            >
              Clear Filters
            </button>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>
